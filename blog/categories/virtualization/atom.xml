<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Virtualization | My Programmer's Road]]></title>
  <link href="http://ssledz.github.io/blog/categories/virtualization/atom.xml" rel="self"/>
  <link href="http://ssledz.github.io/"/>
  <updated>2016-05-15T20:24:18+02:00</updated>
  <id>http://ssledz.github.io/</id>
  <author>
    <name><![CDATA[Sławomir Śledź]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Java Development Environment With Vagrant - Part 1]]></title>
    <link href="http://ssledz.github.io/blog/2015/11/08/java-development-environment-with-vagrant-part-1/"/>
    <updated>2015-11-08T16:06:35+01:00</updated>
    <id>http://ssledz.github.io/blog/2015/11/08/java-development-environment-with-vagrant-part-1</id>
    <content type="html"><![CDATA[<h3 id="preface">Preface</h3>

<p>This post describes my development environment driven by Vagrant (Full description what can be found there is <a href="https://github.com/ssledz/vagrant-boxes/tree/master/java-dev-environment">here</a>). You can ask why Vagrant ? To be honest this is my first adventure with this tool. I am suprised how easy can be the process of setting brand new development environment. This tool can really save plenty of hours.</p>

<h3 id="what-is-vagranthttpsdocsvagrantupcomv2why-vagrantindexhtml-based-on-documentation">What is <a href="https://docs.vagrantup.com/v2/why-vagrant/index.html">Vagrant</a> (based on documentation)</h3>

<p>Vagrant provides easy to configure, reproducible, and portable work environments built on top of industry-standard technology and controlled by a single consistent workflow to help maximize the productivity and flexibility of you and your team. Sounds cool, isn’t it? One can configure the whole development environment with all the tools, needed libraries and various dependencies and other can just based on that create his own brand new development environment. The Process of introducing new team members into the project can be shortened by the time of setting new development environment.</p>

<h3 id="vagrant-providers">Vagrant Providers</h3>

<p>Vagrant has an ability to manage some of machine types like</p>

<ul>
  <li><code>VirtualBox</code></li>
  <li><code>VMware</code></li>
  <li><code>Docker</code></li>
  <li><code>Hyper-V</code></li>
</ul>

<p>In my setting I am using <code>Virtualbox</code> which is a free cross-platform consumer virtualization product supported by Oracle. To use this provider <code>VirtualBox</code> must be installed on its own. VirtualBox can be installed by <a href="https://www.virtualbox.org/wiki/Downloads">downloading</a> a package or installer for your operating system and using standard procedures to install that package.</p>

<h3 id="vagrant-installation">Vagrant Installation</h3>

<p>Visit the <a href="http://www.vagrantup.com/downloads">downloads page</a> and get the appropriate installer or package for your platform. Then install it using standard procedures for your operating system. The installer will automatically add <code>vagrant</code> to your system path so that it is available in terminals.</p>

<h3 id="setting-development-environment">Setting development environment</h3>

<p>To set up java development environment You need just type the following bunch of commands
<code>
git clone git@github.com:ssledz/vagrant-boxes.git
cd vagrant-boxes/java-dev-environment
vagrant up
</code></p>

<p>Now vagrant box image is downloading from the box repository and then installation script <code>provision.sh</code> will be called.</p>

<p>The <code>provision.sh</code> trace can look following
<code>
==&gt; default: Creating directories
==&gt; default:     Creating bin directory
==&gt; default:     Creating public_html directory
==&gt; default:     Creating servers directory
==&gt; default: Installing packages
==&gt; default:     apt-get update
==&gt; default:     Installing vim
==&gt; default:     Installing git
==&gt; default: Installing mc
==&gt; default:     Installing libssl-dev libreadline-dev zlib1g-dev
==&gt; default:     Installing make g++
==&gt; default:     Installing apg
==&gt; default:     Installing mysql-server
==&gt; default:         Creating /etc/mysql/conf.d/utf8_charset.cnf
==&gt; default:         Restarting mysql
==&gt; default:     Installing nginx-core ssl-cert
==&gt; default:         Creating /etc/nginx/sites-available/public_html
==&gt; default:         Enabling /etc/nginx/sites-available/public_html
==&gt; default:         Restarting nginx
==&gt; default: Downloading jdks
==&gt; default:     jdk-5u22-linux-x64.tar.gz is available
==&gt; default:     jdk-6u45-linux-x64.tar.gz is available
==&gt; default:     jdk-7u80-linux-x64.tar.gz is available
==&gt; default:     jdk-8u65-linux-x64.tar.gz is available
==&gt; default: Installing jdks
==&gt; default:     Extracting jdk-5u22-linux-x64.tar.gz
==&gt; default:     Extracting jdk-6u45-linux-x64.tar.gz
==&gt; default: Extracting jdk-7u80-linux-x64.tar.gz
==&gt; default:     Extracting jdk-8u65-linux-x64.tar.gz
==&gt; default:     Cleaning
==&gt; default: Installing apache-maven
==&gt; default:     Downloading apache-maven-3.3.3-bin.tar.gz
==&gt; default:     Extracting apache-maven-3.3.3-bin.tar.gz using tar
==&gt; default:     Cleaning
==&gt; default:     Creating symbolic link apache-maven
==&gt; default: Installing apache-ant
==&gt; default:     Downloading apache-ant-1.9.6-bin.tar.gz
==&gt; default:     Extracting apache-ant-1.9.6-bin.tar.gz using tar
==&gt; default:     Cleaning
==&gt; default:     Creating symbolic link apache-ant
==&gt; default: Installing gradle
==&gt; default:     Downloading gradle-2.8-bin.zip
==&gt; default:     Extracting gradle-2.8-bin.zip using unzip
==&gt; default:     Cleaning
==&gt; default:     Creating symbolic link gradle
==&gt; default: Installing sbt
==&gt; default:     Downloading sbt-0.13.9.tgz
==&gt; default:     Extracting sbt-0.13.9.tgz using tar
==&gt; default:     Cleaning
==&gt; default:     Creating symbolic link sbt
==&gt; default: Installing environment managers (for Java, Ruby, node.js and Python) 
==&gt; default:     Installing jenv
==&gt; default:         Clonning from github to ~/.jenv
==&gt; default:         Setting environment variables
==&gt; default:         Make build tools jenv aware
==&gt; default:             ant plugin activated
==&gt; default:             maven plugin activated
==&gt; default:             gradle plugin activated
==&gt; default:             sbt plugin activated
==&gt; default:     Installing rbenv
==&gt; default:         Clonning from github to ~/.rbenv
==&gt; default:         Installing plugins that provide rbenv install
==&gt; default:     Installing nodenv
==&gt; default:         Clonning from github to ~/.nodenv
==&gt; default:         Installing plugins that provide nodenv install
==&gt; default:     Installing pyenv
==&gt; default:         Clonning from github to ~/.pyenv
==&gt; default: Updating .bashrc
==&gt; default: Install runtimes using environment managers
==&gt; default:     Install java
==&gt; default:     Set jdk 1.8 globally
==&gt; default:     Install ruby
==&gt; default:     Install node.js
==&gt; default:     install python
==&gt; default: Installing apache-tomcat
==&gt; default:     Downloading apache-tomcat-8.0.28.tar.gz
==&gt; default:     Extracting apache-tomcat-8.0.28.tar.gz using tar
==&gt; default:     Cleaning
==&gt; default:     Creating symbolic link apache-tomcat
==&gt; default:     Creating apache-tomcat /bin/setenv.sh
==&gt; default:     Copying tomcat-users.xml to apache-tomcat/conf
==&gt; default:     Creating /etc/init.d/tomcat script
==&gt; default:     Starting tomcat
</code></p>

<p>To loggin to the machine do
<code>
vagrant ssh
</code></p>

<p>To check what can You find in this environment please visit this <a href="https://github.com/ssledz/vagrant-boxes/tree/master/java-dev-environment">page</a>.</p>

<p>More about how to use this setting to develop in the next post.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Virtual Box VDI Compaction]]></title>
    <link href="http://ssledz.github.io/blog/2015/10/13/virtual-box-vdi-compaction/"/>
    <updated>2015-10-13T10:00:43+02:00</updated>
    <id>http://ssledz.github.io/blog/2015/10/13/virtual-box-vdi-compaction</id>
    <content type="html"><![CDATA[<p>Virtual Disk Image (<code>VDI</code>) files grow over time. If You discover that VDI on the host system is much bigger than used space on the guest partition it is time for compaction.</p>

<ol>
  <li>Install zerofree tool (<code>apt-get install zerofree</code>).</li>
  <li>Remove unused files (<code>apt-get autoremove</code>, <code>apt-get autoclean</code>, <code>orphaner --guess-all</code>).</li>
  <li>Reboot the guest system in single user mode (Grub menu will appear if you press and hold <code>Shift</code> during starting, 
then hit <code>e</code> when Grub boot appear and append <code>single</code> option to the Grub boot parameters).</li>
  <li>Remount filesystems as readonly (<code>mount -n -o remount,ro -t auto /dev/sda1 /</code>).</li>
  <li>Fill unused block with zeros (<code>zerofree /dev/sda1</code>). It’s time consuming operation. If You have other disk devices (e.g. <code>/dev/sda5</code>) then also perform <code>zerofree</code> on each one.</li>
  <li>Shutdown the system (<code>poweroff</code>).</li>
  <li>Compact VDI files on the host system (<code>VBoxManage modifyhd my.vdi compact</code>). It’s time consuming operation.</li>
</ol>

<p>Instead points 1,3-5 to fill free space with zeros You can do following (You don’t need to boot in single user mode)</p>

<ol>
  <li><code>sudo dd if=/dev/zero of=/bigemptyfile bs=4096k</code></li>
  <li><code>sudo rm -rf /bigemptyfile</code></li>
</ol>
]]></content>
  </entry>
  
</feed>
